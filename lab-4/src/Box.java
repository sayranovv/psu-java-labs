/**
 * Обобщённый класс Коробка (Box).
 * Может хранить один объект произвольного типа в один момент времени.
 * 
 * Характеристики:
 * - Хранит один объект типа T
 * - Объект можно получить и разместить в любой момент
 * - При извлечении ссылка на объект обнуляется
 * - При попытке добавить в непустую коробку выбрасывается исключение
 * - Имеет метод проверки на заполненность
 * 
 * @param <T> - типовая переменная, определяет тип хранимого объекта
 */
public class Box<T> {
    // Содержимое коробки - может быть любого типа T или null
    private T content;
    
    // Переменная для отслеживания, пуста ли коробка
    private boolean isEmpty;

    /**
     * Конструктор коробки.
     * Инициализирует пустую коробку (content = null, isEmpty = true)
     */
    public Box() {
        this.content = null;
        this.isEmpty = true;
    }

    /**
     * Поместить объект в коробку.
     * Если коробка не пуста - выбросить исключение.
     * 
     * @param item - объект для размещения в коробке
     * @throws IllegalStateException - если коробка уже содержит объект
     */
    public void put(T item) {
        // Проверка: если коробка не пуста, выбросить исключение
        if (!isEmpty) {
            throw new IllegalStateException(
                "✗ Ошибка: коробка не пуста! Сначала извлеките содержимое."
            );
        }
        
        // Размещение объекта в коробке
        this.content = item;
        // Обновление флага пустоты
        this.isEmpty = false;
    }

    /**
     * Извлечь объект из коробки.
     * После извлечения содержимое обнуляется, и коробка считается пустой.
     * 
     * @return объект, который был в коробке, или null если коробка была пуста
     */
    public T get() {
        // Сохраняем объект для возврата
        T item = content;
        
        // Обнуляем содержимое коробки
        this.content = null;
        
        // Помечаем коробку как пустую
        this.isEmpty = true;
        
        // Возвращаем извлечённый объект (может быть null)
        return item;
    }

    /**
     * Проверить, пуста ли коробка.
     * 
     * @return true если коробка пуста, false если содержит объект
     */
    public boolean isEmpty() {
        return isEmpty;
    }

    /**
     * Переопределённый метод toString для удобного представления коробки.
     * Показывает статус коробки и её содержимое (если оно есть).
     * 
     * @return строковое представление коробки
     */
    @Override
    public String toString() {
        if (isEmpty) {
            return "Box{содержимое=ПУСТО}";
        } else {
            return "Box{содержимое=" + content + "}";
        }
    }
}
